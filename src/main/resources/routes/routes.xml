<?xml version="1.0" encoding="UTF-8"?>
<routes xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://camel.apache.org/schema/spring"
        xsi:schemaLocation="
            http://camel.apache.org/schema/spring
            http://camel.apache.org/schema/spring/camel-spring.xsd">

    <route id="xml-route">
        
        <from id="_fromGL" uri="platform-http:{{endpoint.url}}/ActualizaTarea" />
        <doTry id="_doTry1">
            <unmarshal>
                <json library="Jackson"/>
            </unmarshal>
            <log id="_log1" message="Consulta servicio restForumGET spFoTareaActualizar: lIdtplTarea= ${body[lIdtplTarea]}, lIdtplTipoTarea= ${body[lIdtplTipoTarea]}, lIdtplTipoEstadoTarea= ${body[lIdtplTipoEstadoTarea]}, lIdtplSeguimientoOper= ${body[lIdtplSeguimientoOper]}, lIdtplSeguimientoOper= ${body[lIdtplUsuarioDueno]}, lIdtplUsuarioEjecutor= ${body[lIdtplUsuarioEjecutor]}, lIdtplUsuarioAsignador= ${body[lIdtplUsuarioAsignador]}, FechaCreacion ${body[dFechaCreacion]}, dFechaPlan ${body[dFechaPlan]}, dFechaTermino ${body[dFechaTermino]}, cObservacion ${body[cObservacion]}, cRespuesta ${body[cRespuesta]}" />
            <to id="_toGL" uri="sql-stored:spFoTareaActualizar( INTEGER ${body[lIdtplTarea]},
                                                                INTEGER ${body[lIdtplTipoTarea]},
                                                                INTEGER ${body[lIdtplTipoEstadoTarea]},    
                                                                INTEGER ${body[lIdtplSeguimientoOper]},    
                                                                INTEGER ${body[lIdtplUsuarioDueno]},    
                                                                INTEGER ${body[lIdtplUsuarioEjecutor]},    
                                                                INTEGER ${body[lIdtplUsuarioAsignador]},    
                                                                DATE ${body[dFechaCreacion]},    
                                                                DATE ${body[dFechaPlan]},    
                                                                DATE ${body[dFechaTermino]},    
                                                                VARCHAR ${body[cObservacion]},    
                                                                VARCHAR ${body[cRespuesta]})" />
            <bean id="metodoGL" ref="actualizaTareaBean" />
            <log id="_log2" message="Consulta servicio restForumGET ActualizaTarea...${body.success}..." />
            <doCatch id="_doCatch1">
                <exception>org.apache.camel.TypeConversionException</exception>
                <log id="_log_doCatch1" 
                    message="Consulta servicio restForumGET ActualizaTarea.error org.apache.camel.TypeConversionException ${exception.stacktrace}" />
                <setHeader name="tipoError" id="_setHeaderError_doCatch1">
                    <simple resultType="java.lang.String">org.apache.camel.TypeConversionException</simple>
                </setHeader>
                <process id="_process1_doCatch1" ref="errorResponseProcessor" />
            </doCatch>
            <doCatch id="_doCatch2">
                <exception>java.lang.NumberFormatException</exception>
                <log id="_log_doCatch2"
                    message="Consulta servicio restForumGET ActualizaTarea.error java.lang.NumberFormatException ${exception.stacktrace}" />
                <setHeader name="tipoError" id="_setHeaderError_doCatch2">
                    <simple resultType="java.lang.String">java.lang.NumberFormatException</simple>
                </setHeader>
                <process id="_process1_doCatch2" ref="errorResponseProcessor" />
            </doCatch>
            <doCatch id="_doCatch3">
                <exception>java.sql.SQLException</exception>
                <log id="_log_doCatch3"
                    message="Consulta servicio restForumGET ActualizaTarea.error  java.sql.SQLException ${exception.stacktrace}" />
                <setHeader name="tipoError" id="_setHeaderError_doCatch3">
                    <simple resultType="java.lang.String">java.sql.SQLException</simple>
                </setHeader>
                <process id="_process1_doCatch3" ref="errorResponseProcessor" />
            </doCatch>
            <doCatch id="_doCatch10">
                <exception>java.lang.Exception</exception>
                <log id="_log_doCatch10"
                    message="Consulta servicio restForumGET ActualizaTarea.error java.lang.Exception ${exception.stacktrace} " />
                <setHeader name="tipoError" id="_setHeaderError_doCatch10">
                    <simple resultType="java.lang.String">java.lang.Exception</simple>
                </setHeader>
                <process id="_process1_doCatch10" ref="errorResponseProcessor" />
            </doCatch>
            <doFinally id="_doFinally1">
                <marshal>
                    <json unmarshalType="cl.forum.hammer.actualizaTarea.pojo.ResponseForum" library="Jackson"/>
                </marshal>
                <log id="_log"
                    message="Consulta servicio restForumGET ActualizaTarea.2: " />
                <setHeader name="Content-Type" id="_setHeaderGL">
                    <constant>application/json</constant>
                </setHeader>
            </doFinally>
            <to uri="log:end" />
        </doTry>
    </route>

</routes>
